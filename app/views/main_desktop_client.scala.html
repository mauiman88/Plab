@(title: String, scripts:Html = Html(""))(content: Html)

@scripts = {
    @helper.javascriptRouter("jsRouter")(
        controllers.routes.javascript.Products.authenticateDesk
    )
    <script type="text/javascript">
        app.controller('DesktopController', function($scope) {

            $scope.deskNumber = null;
            $scope.deskCode = "";

            $scope.authenticateDesk = function() {
                $scope.errors={};
                jsRouter.controllers.Products.authenticateDesk()
                .ajax({
                    cache: false,
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        deskNumber: $scope.deskNumber,
                        deskCode: $scope.deskCode
                    }),
                    success: function(data){
                        $scope.$apply(function() {

                        })
                    },
                    error: function(data) {
                        $scope.$apply(function() {
                            $scope.errors=data.responseJSON;
                            console.log($scope.errors);
                        })
                    }
                })
            }
        });
    </script>
}
@main(title, scripts) {
<div ng-controller="DesktopController">
    @if(controllers.Application.getLocalDesk() == null) {
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home"></span></a>
                <div class="dropdown navbar-brand">
                    <a id="orders" data-toggle="dropdown" aria-expanded="true">
                        Orders
                    </a>
                    <div class="dropdown-menu" role="menu" aria-labelledby="orders">
                        <form style="margin:20px;" role="form" ng-submit="authenticateDesk()">
                            <div class="form-group">
                                <input type="text" ng-model="deskNumber" placeholder="Desk number" class="form-control">
                            </div>
                            <div class="form-group ng-scope {{ errors.deskCode ? 'has-error' : '' }}">
                                <label class=" control-label">Desk Code</label>
                                <div class="">
                                    <input type="password" ng-model="deskCode" placeholder="Desk code" class="form-control">
                                    <span class="form-control-feedback" ng-repeat="error in errors.deskCode">{{error}}</span>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-success pull-right">Sign in</button>
                        </form>
                    </div>
                </div>
            </div>

            <div id="navbar" class="navbar-collapse collapse">
                <form class="navbar-form navbar-right" role="form">
                    <div class="form-group">
                        <input type="text" placeholder="Email" class="form-control">
                    </div>
                    <div class="form-group">
                        <input type="password" placeholder="Password" class="form-control">
                    </div>
                    <button type="submit" class="btn btn-success">Sign in</button>
                </form>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    } else {

    }
    <div class="row">
        <div class="col-md-9" style="margin-top: 100px">
            @content
        </div>
    </div>

</div> <!-- End of Controller -->

}